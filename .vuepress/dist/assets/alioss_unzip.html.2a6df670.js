import{_ as p}from"./_plugin-vue_export-helper.cdc0426e.js";import{o,c as e,a as c,b as n,d as t,e as s,f as l,r as u}from"./app.332a920c.js";const i={},r=n("h1",{id:"\u4F7F\u7528\u963F\u91CC\u4E91-oss-\u4E91\u51FD\u6570-\u5B9E\u73B0-zip-\u81EA\u52A8\u89E3\u538B",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u4F7F\u7528\u963F\u91CC\u4E91-oss-\u4E91\u51FD\u6570-\u5B9E\u73B0-zip-\u81EA\u52A8\u89E3\u538B","aria-hidden":"true"},"#"),s(" \u4F7F\u7528\u963F\u91CC\u4E91 oss + \u4E91\u51FD\u6570 \u5B9E\u73B0 zip \u81EA\u52A8\u89E3\u538B")],-1),k=n("p",null,"\u524D\u6BB5\u65F6\u95F4\uFF0C\u516C\u53F8\u6709\u4E2A\u9700\u6C42\uFF0C\u5546\u5BB6\u9700\u8981\u6279\u91CF\u7F16\u8F91\u5546\u54C1\u7684\u56FE\u7247\uFF0C\u56FE\u7247\u5305\u62EC\u4E3B\u56FE\u3001\u89C4\u683C\u56FE\u3001\u8BE6\u60C5\u56FE\uFF0C\u800C\u4E14\u90FD\u6709\u591A\u5F20\uFF1B\u5982\u679C\u5355\u7EAF\u7684\u901A\u8FC7\u4EBA\u5DE5\u5355\u4E2A\u6587\u4EF6\u7F16\u8F91\u9700\u8981\u8017\u8D39\u5927\u91CF\u7684\u4EBA\u529B\uFF0C\u6240\u4EE5\u9700\u8981\u4F7F\u7528\u5230\u6279\u91CF\u56FE\u7247\u4E0A\u4F20\uFF0C\u800C\u9700\u8981\u5B9E\u73B0\u8BE5\u529F\u80FD\u9700\u8981\u89E3\u51B3\u4EE5\u4E0B\u95EE\u9898",-1),m=l(`<h2 id="\u9762\u4E34\u7684\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u9762\u4E34\u7684\u95EE\u9898" aria-hidden="true">#</a> \u9762\u4E34\u7684\u95EE\u9898</h2><ul><li>\u56FE\u7247\u6570\u91CF\u592A\u591A\uFF0C\u76F4\u63A5\u4F7F\u7528 <code>multiple</code> \u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u4E0D\u662F\u90A3\u4E48\u53CB\u597D</li><li>\u5982\u679C\u4E0A\u4F20\u538B\u7F29\u5305\uFF0C\u9488\u5BF9\u5927\u6587\u4EF6\u4E0A\u4F20\u9700\u8981\u5F15\u5165\u5206\u7247\u4E0A\u4F20</li><li>\u5982\u679C\u7ECF\u8FC7\u81EA\u5DF1\u670D\u52A1\u5668\u4E0A\u4F20\uFF0C\u5360\u7528\u5E26\u5BBD\u8F83\u5927\uFF0C\u5BF9\u8D44\u6E90\u5360\u7528\u8F83\u591A</li><li>\u5982\u679Cc\u7AEF\u76F4\u8FDEoss\u4E0A\u4F20\uFF0C\u670D\u52A1\u7AEF\u4E0B\u8F7D\u540E\u89E3\u538B\uFF0C\u540C\u6837\u4E0B\u8F7D\u6D6A\u8D39\u4E0D\u5FC5\u8981\u7684\u8D44\u6E90</li></ul><h3 id="\u600E\u4E48\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u600E\u4E48\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898" aria-hidden="true">#</a> \u600E\u4E48\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898</h3><p>\u5982\u4E0A\u9762\u7684\u95EE\u9898\uFF0C\u6700\u7EC8\u53EF\u4EE5\u80AF\u5B9A\u7684\u662F\uFF1A1\u3001\u4E0A\u4F20\u538B\u7F29\u5305 2\u3001c\u7AEF\u76F4\u8FDEoss 3\u3001\u6700\u597D\u80FD\u5728\u670D\u52A1\u5668\u4E4B\u5916\u5B9E\u73B0\u89E3\u538B\u5E76\u5C06\u56FE\u7247\u5173\u8054\u5546\u54C1\uFF1B\u901A\u8FC7\u963F\u91CCoss\u7684\u8C03\u7814\uFF0C\u53D1\u73B0\u5728\u4E0A\u4F20\u65F6\u53EF\u4EE5\u89E6\u53D1 <code>\u4E91\u51FD\u6570</code> \u4E8B\u4EF6\uFF0C\u8FBE\u5230 <code>\u81EA\u52A8\u89E3\u538B\u7684\u76EE\u7684</code></p><ul><li>\u4F7F\u7528 \u963F\u91CCoss \u7684\u5206\u7247\u4E0A\u4F20 sdk\uFF0C\u89E3\u51B3\u5927\u6587\u4EF6\u4E0A\u4F20\u6162\u95EE\u9898</li><li>\u5982\u4F55\u624D\u77E5\u9053\u89E3\u538B\u5B8C\u6210\u4E86\uFF1F-- \u4E91\u51FD\u6570\u5185\u90E8\u901A\u8FC7\u56DE\u8C03\u89E3\u51B3</li><li>\u5982\u4F55\u89E3\u51B3\u7528\u6237\u4E0A\u4F20\u5230\u4E00\u534A\u65AD\u5F00\u95EE\u9898\uFF1F -- \u81EA\u52A8\u5220\u9664\u5206\u7247\u6570\u636E</li><li>\u5982\u4F55\u77E5\u9053\u4E0A\u4F20\u4E86\u54EA\u4E9B\u5546\u54C1\u7684\u56FE\u7247\uFF1F -- \u4ECE\u56FE\u7247\u547D\u540D\u4E0A + \u56DE\u8C03\u5217\u4E3E\u6587\u4EF6\u7ED1\u5B9A\u5546\u54C1</li></ul><h2 id="\u5982\u4F55\u5B9E\u65BD" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u5B9E\u65BD" aria-hidden="true">#</a> \u5982\u4F55\u5B9E\u65BD</h2><ol><li>\u524D\u7AEF\u901A\u8FC7\u4E34\u65F6STS\u6388\u6743\u76F4\u63A5\u8C03\u7528alioss\u7684\u63A5\u53E3\uFF0C\u540E\u7AEF\u63A5\u53E3\u63D0\u4F9B\u4E34\u65F6STS\u9A8C\u8BC1\u53C2\u6570</li><li>\u4F7F\u7528<code>\u5206\u7247\u4E0A\u4F20</code>\u65B9\u6848\uFF0C\u52A0\u5FEB\u4E0A\u4F20\u6548\u7387\uFF0C\u4FDD\u8BC1\u6210\u529F\u7387</li><li>\u4F7F\u7528oss\u4E91\u51FD\u6570zip\u89E3\u538B\u7F29\uFF0C\u5546\u6237\u540E\u53F0\u76F4\u63A5\u4E0A\u4F20\u538B\u7F29\u5305\u5373\u53EF</li><li>\u6DFB\u52A0\u4E0A\u4F20\u6210\u529F\u56DE\u8C03\uFF0C\u540E\u7AEF\u901A\u8FC7\u56DE\u8C03\u5904\u7406\u56FE\u7247\u548C\u5546\u54C1\u7684\u5BF9\u5E94\u5173\u7CFB, \u5E76\u4E14\u5220\u9664\u538B\u7F29\u5305</li></ol><h3 id="\u5B9E\u65BD\u6B65\u9AA4" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u65BD\u6B65\u9AA4" aria-hidden="true">#</a> \u5B9E\u65BD\u6B65\u9AA4</h3><ol><li>\u521B\u5EFA<code>\u521B\u5EFA\u5B50\u7528\u6237/STS\u6388\u6743\u89D2\u8272</code></li></ol><p>\u521B\u5EFA\u5B50\u7528\u6237/STS\u6388\u6743\u89D2\u8272\uFF0C\u901A\u8FC7\u6B64\u6B65\u9AA4\u53EF\u4EE5\u83B7\u53D6\u5230\u7528\u4E8E\u8C03\u7528 sts\u4E34\u65F6\u6388\u6743\u7684\u53C2\u6570 <code>accessKeyId</code>\uFF0C<code>accessKeySecret</code>\uFF0C<code>RoleArn</code></p><details class="custom-container details"><summary>\u6388\u6743</summary><p><img src="https://oss.itruke.com/doc/202209/1663755427-7f84.png?x-oss-process=image/format,webp" alt="" loading="lazy"><img src="https://oss.itruke.com/doc/202209/1663755460-0cc0.png?x-oss-process=image/format,webp" alt="" loading="lazy"><img src="https://oss.itruke.com/doc/202209/1663755491-ef10.png?x-oss-process=image/format,webp" alt="" loading="lazy"><img src="https://oss.itruke.com/doc/202209/1663755508-0e3e.png?x-oss-process=image/format,webp" alt="" loading="lazy"></p></details><ol start="2"><li>\u5F00\u901A\u4E91\u51FD\u6570\u670D\u52A1</li></ol><details class="custom-container details"><summary>\u4E91\u51FD\u6570\u5F00\u901A</summary><ol><li>\u5F00\u901A\u4E91\u51FD\u6570\u670D\u52A1 -- \u9009\u62E9\u8FD0\u884C\u5185\u5B58\u65F6\u8BF7\u9009\u62E9\u5927\u4E00\u70B9\u7684(\u6700\u597D3GB)</li><li>oss\u5B58\u50A8\u670D\u52A1\u627E\u5230\u5BF9\u5E94\u7684 buket \u6D4B\u8BD5\u73AF\u5883\u548C\u6B63\u5F0F\u73AF\u5883\u4E3A <code>xxxx</code>, \u5F00\u901Azip\u89E3\u538B\u7F29\u529F\u80FD</li></ol><p><img src="https://oss.itruke.com/doc/202209/1663755635-a517.png?x-oss-process=image/format,webp" alt="" loading="lazy"><img src="https://oss.itruke.com/doc/202209/1663755659-1d71.png?x-oss-process=image/format,webp" alt="" loading="lazy"><img src="https://oss.itruke.com/doc/202209/1663755695-a3f2.png?x-oss-process=image/format,webp" alt="" loading="lazy"></p><p><code>\u524D\u7F00</code>\uFF1A\u4E0A\u4F20\u65F6\u7684\u524D\u7F00\uFF0C\u6BD4\u5982\u6211\u8981\u4E0A\u4F20\u4E00\u4E2A\u538B\u7F29\u5305xxx.zip, \u5728\u4EE3\u7801\u4E2D\u5C31\u5E94\u8BE5\u6DFB\u52A0\u524D\u7F00\uFF0Cobjectname=batch_images_zip/IMG_xxx.zip</p><p><code>\u76EE\u6807\u76EE\u5F55</code>\uFF1A\u4E5F\u5C31\u662F\u89E3\u538B\u51FA\u6765\u7684\u76EE\u5F55\u4E3A img_unit_goods/IMG_xxx/\u538B\u7F29\u5305\u89E3\u538B\u51FA\u6765\u7684\u5185\u5BB9</p></details><ol start="3"><li>\u6D41\u7A0B</li></ol><p><img src="https://oss.itruke.com/doc/202209/1663755789-bbb2.png?x-oss-process=image/format,webp" alt="" loading="lazy"></p><ol start="4"><li>\u6587\u4EF6\u4E0A\u4F20\u4EE3\u7801\u793A\u4F8B</li></ol><div class="language-html ext-html"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u4E0A\u4F20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token comment">&lt;!-- \u5BFC\u5165sdk\u6587\u4EF6 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
      <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://gosspublic.alicdn.com/aliyun-oss-sdk-6.16.0.min.js<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">


      <span class="token keyword">function</span> <span class="token function">randomString</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
            e <span class="token operator">=</span> e <span class="token operator">||</span> <span class="token number">32</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> t <span class="token operator">=</span> <span class="token string">&quot;ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678&quot;</span><span class="token punctuation">,</span>
            a <span class="token operator">=</span> t<span class="token punctuation">.</span>length<span class="token punctuation">,</span>
            n <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> e<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> n <span class="token operator">+=</span> t<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> n
      <span class="token punctuation">}</span>

      <span class="token keyword">function</span> <span class="token function">getOption</span><span class="token punctuation">(</span><span class="token parameter">config<span class="token punctuation">,</span> unit_id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> ac <span class="token operator">=</span> <span class="token function">randomString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
          <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>config<span class="token punctuation">.</span>object_prefix<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>unit_id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>ac<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.zip</span><span class="token template-punctuation string">\`</span></span>
          <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">// \u83B7\u53D6\u5206\u7247\u4E0A\u4F20\u8FDB\u5EA6\u3001\u65AD\u70B9\u548C\u8FD4\u56DE\u503C\u3002</span>
            <span class="token function-variable function">progress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> cpt<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">name</span><span class="token operator">:</span>name<span class="token punctuation">,</span>
            <span class="token comment">// \u8BBE\u7F6E\u5E76\u53D1\u4E0A\u4F20\u7684\u5206\u7247\u6570\u91CF\u3002</span>
            <span class="token comment">// parallel: 2,</span>
            <span class="token comment">// \u8BBE\u7F6E\u5206\u7247\u5927\u5C0F\u3002\u9ED8\u8BA4\u503C\u4E3A1 MB\uFF0C\u6700\u5C0F\u503C\u4E3A100 KB\u3002</span>
            <span class="token literal-property property">partSize</span><span class="token operator">:</span> config<span class="token punctuation">.</span>part_size<span class="token punctuation">,</span>
            <span class="token comment">// headers,</span>
            <span class="token comment">// \u81EA\u5B9A\u4E49\u5143\u6570\u636E\uFF0C\u901A\u8FC7HeadObject\u63A5\u53E3\u53EF\u4EE5\u83B7\u53D6Object\u7684\u5143\u6570\u636E\u3002</span>
            <span class="token comment">// meta: { year: 2020, people: &quot;test&quot; },</span>
            <span class="token comment">// mime: &quot;text/plain&quot;,</span>
            <span class="token comment">// \u56DE\u8C03</span>
            <span class="token literal-property property">callback</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token comment">// \u8BBE\u7F6E\u56DE\u8C03\u8BF7\u6C42\u7684\u670D\u52A1\u5668\u5730\u5740\u3002</span>
                <span class="token literal-property property">url</span><span class="token operator">:</span> config<span class="token punctuation">.</span>cb_url<span class="token punctuation">,</span>
                <span class="token comment">// \u8BBE\u7F6E\u56DE\u8C03\u8BF7\u6C42\u6D88\u606F\u5934\u4E2DHost\u7684\u503C\uFF0C\u5373\u60A8\u7684\u670D\u52A1\u5668\u914D\u7F6EHost\u7684\u503C\u3002</span>
                <span class="token literal-property property">host</span><span class="token operator">:</span> config<span class="token punctuation">.</span>cb_host<span class="token punctuation">,</span>
                <span class="token comment">/* eslint no-template-curly-in-string: [0] */</span>
                <span class="token comment">// \u8BBE\u7F6E\u53D1\u8D77\u56DE\u8C03\u65F6\u8BF7\u6C42body\u7684\u503C\u3002</span>
                <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">bucket=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>config<span class="token punctuation">.</span>oss<span class="token punctuation">.</span>bucket<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;object=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;unit_id=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>unit_id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&amp;unzip_dir=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>config<span class="token punctuation">.</span>unzip_dir<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span>
                <span class="token comment">// \u8BBE\u7F6E\u53D1\u8D77\u56DE\u8C03\u8BF7\u6C42\u7684Content-Type\u3002</span>
                <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">,</span>
                <span class="token comment">// customValue: {</span>
                <span class="token comment">//   // \u8BBE\u7F6E\u53D1\u8D77\u56DE\u8C03\u8BF7\u6C42\u7684\u81EA\u5B9A\u4E49\u53C2\u6570\u3002</span>
                <span class="token comment">//   bucket: config.oss.bucket,</span>
                <span class="token comment">//   object_name: name,</span>
                <span class="token comment">//   unit_id: unit_id,</span>
                <span class="token comment">//   unzip_path: config.unzip_dir</span>
                <span class="token comment">// },</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
          <span class="token keyword">return</span> options
      <span class="token punctuation">}</span>

      <span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">oss</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token comment">// yourRegion\u586B\u5199Bucket\u6240\u5728\u5730\u57DF\u3002\u4EE5\u534E\u4E1C1\uFF08\u676D\u5DDE\uFF09\u4E3A\u4F8B\uFF0CRegion\u586B\u5199\u4E3Aoss-cn-hangzhou\u3002</span>
          <span class="token literal-property property">region</span><span class="token operator">:</span> <span class="token string">&quot;oss-cn-shenzhen&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// \u4ECESTS\u670D\u52A1\u83B7\u53D6\u7684\u4E34\u65F6\u8BBF\u95EE\u5BC6\u94A5\uFF08AccessKey ID\u548CAccessKey Secret\uFF09\u3002</span>
          <span class="token literal-property property">accessKeyId</span><span class="token operator">:</span> <span class="token string">&quot;STS.NTrZympmvYwZ9E9Y82HhDbE7p&quot;</span><span class="token punctuation">,</span>
          <span class="token literal-property property">accessKeySecret</span><span class="token operator">:</span> <span class="token string">&quot;HVBJ828jUesudN8dHNLQciSZYsMyLMMfGD9EgYM66DQV&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// \u4ECESTS\u670D\u52A1\u83B7\u53D6\u7684\u5B89\u5168\u4EE4\u724C\uFF08SecurityToken\uFF09\u3002</span>
          <span class="token literal-property property">stsToken</span><span class="token operator">:</span> <span class="token string">&quot;CAIS6gF1q6Ft5B2yfSjIr5fHEcPZnbJX7rr3WAGzarOSVjeGpoVpFIXqaIuAoEml2Ihsz5Fdt604zkctz2OSVVov2r4VfomRJwlkt+Q==&quot;</span><span class="token punctuation">,</span>
          <span class="token comment">// \u586B\u5199Bucket\u540D\u79F0\uFF0C\u4F8B\u5982examplebucket\u3002</span>
          <span class="token literal-property property">bucket</span><span class="token operator">:</span> <span class="token string">&quot;ruke&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">object_prefix</span><span class="token operator">:</span> <span class="token string">&#39;batch_images_zip/IMG_&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">part_size</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token operator">*</span><span class="token number">1024</span><span class="token operator">*</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">// 500M,</span>
        <span class="token literal-property property">cb_url</span><span class="token operator">:</span> <span class="token string">&#39;https://b780-113-88-138-174.ap.ngrok.io/cb.php&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">cb_host</span><span class="token operator">:</span> <span class="token string">&#39;b780-113-88-138-174.ap.ngrok.io&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">unzip_dir</span><span class="token operator">:</span> <span class="token string">&#39;img_unit_goods&#39;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OSS</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>oss<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> unit_id <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span> <span class="token comment">//\u83B7\u53D6\u5F53\u524Dunit_id</span>

      <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token comment">// \u6307\u5B9A\u8BE5Object\u88AB\u4E0B\u8F7D\u65F6\u7684\u7F51\u9875\u7F13\u5B58\u884C\u4E3A\u3002</span>
        <span class="token string-property property">&quot;Cache-Control&quot;</span><span class="token operator">:</span> <span class="token string">&quot;no-cache&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// \u6307\u5B9A\u8BE5Object\u88AB\u4E0B\u8F7D\u65F6\u7684\u540D\u79F0\u3002</span>
        <span class="token comment">// &quot;Content-Disposition&quot;: \`IMG_\${unit_id}.zip\`,</span>
        <span class="token comment">// \u6307\u5B9A\u8BE5Object\u88AB\u4E0B\u8F7D\u65F6\u7684\u5185\u5BB9\u7F16\u7801\u683C\u5F0F\u3002</span>
        <span class="token string-property property">&quot;Content-Encoding&quot;</span><span class="token operator">:</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// \u6307\u5B9A\u8FC7\u671F\u65F6\u95F4\uFF0C\u5355\u4F4D\u4E3A\u6BEB\u79D2\u3002</span>
        <span class="token comment">// Expires: &quot;1000&quot;,</span>
        <span class="token comment">// \u6307\u5B9AObject\u7684\u5B58\u50A8\u7C7B\u578B\u3002</span>
        <span class="token string-property property">&quot;x-oss-storage-class&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard&quot;</span><span class="token punctuation">,</span>
        <span class="token comment">// \u6307\u5B9AObject\u6807\u7B7E\uFF0C\u53EF\u540C\u65F6\u8BBE\u7F6E\u591A\u4E2A\u6807\u7B7E\u3002</span>
        <span class="token comment">// &quot;x-oss-tagging&quot;: &quot;Tag1=1&amp;Tag2=2&quot;,</span>
        <span class="token comment">// \u6307\u5B9A\u521D\u59CB\u5316\u5206\u7247\u4E0A\u4F20\u65F6\u662F\u5426\u8986\u76D6\u540C\u540DObject\u3002\u6B64\u5904\u8BBE\u7F6E\u4E3Atrue\uFF0C\u8868\u793A\u7981\u6B62\u8986\u76D6\u540C\u540DObject\u3002</span>
        <span class="token string-property property">&quot;x-oss-forbid-overwrite&quot;</span><span class="token operator">:</span> <span class="token string">&quot;true&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>

      <span class="token comment">// \u6307\u5B9A\u4E0A\u4F20\u5230examplebucket\u7684Object\u540D\u79F0\uFF0C\u4F8B\u5982exampleobject.txt\u3002</span>
      

      <span class="token comment">// \u83B7\u53D6DOM\u3002</span>
      <span class="token keyword">const</span> submit <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;submit&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// \u76D1\u542C\u6309\u94AE\u3002</span>
      submit<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token comment">// \u5206\u7247\u4E0A\u4F20\u3002</span>
          <span class="token keyword">const</span> data <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token keyword">let</span> opt <span class="token operator">=</span> <span class="token function">getOption</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> <span class="token number">128</span><span class="token punctuation">)</span>
          <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> client<span class="token punctuation">.</span><span class="token function">multipartUpload</span><span class="token punctuation">(</span>opt<span class="token punctuation">.</span>name<span class="token punctuation">,</span> data<span class="token punctuation">,</span> opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> \u6CE8\u610F\u4E8B\u9879</h2>`,18),d=s("\u6587\u4EF6\u4E0A\u4F20\u540E\uFF0C\u4E91\u51FD\u6570\u4F1A\u81EA\u52A8\u5C06\u538B\u7F29\u5305\u89E3\u538B\u5230 "),g=n("code",null,"img_unit_goods/IMG_128_xxdadsdee23d/000644_m_1.jpg",-1),_=s("\u8FD9\u79CD\u5F62\u5F0F\uFF0C \u800C\u8FD9\u4E2A\u6587\u4EF6\u5982\u4F55\u8BBF\u95EE\u5462\uFF1F "),h={href:"https://oxxx.com/img_unit_goods/IMG_128_xxdadsdee23d/000644_m_1.jpg",target:"_blank",rel:"noopener noreferrer"},y=s("https://oxxx.com/img_unit_goods/IMG_128_xxdadsdee23d/000644_m_1.jpg"),b=n("li",null,"\u788E\u7247\u7BA1\u7406 -- \u4E0A\u4F20\u4E2D\u6BB5\u7684\u788E\u7247\u7BA1\u7406\uFF0C\u8BBE\u7F6E\u4E3A7\u5929\u8FC7\u671F",-1),f=n("p",null,[n("img",{src:"https://oss.itruke.com/doc/202209/1663756355-b44a.png?x-oss-process=image/format,webp",alt:"",loading:"lazy"})],-1),q={start:"3"},x=s("\u540E\u7AEF\u63A5\u6536\u5230\u4E0A\u4F20\u56DE\u8C03\u8BE5\u505A\u54EA\u4E9B\u64CD\u4F5C\u5462\uFF1F "),w=s("\u904D\u5386\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6\uFF0C\u5C06\u6570\u636E\u66F4\u65B0 "),z={href:"https://help.aliyun.com/document_detail/84841.html",target:"_blank",rel:"noopener noreferrer"},S=s("\u5217\u4E3E\u6587\u4EF6"),j=s(),v={href:"https://help.aliyun.com/document_detail/31860.html",target:"_blank",rel:"noopener noreferrer"},I=s("\u63A5\u53E3\u793A\u4F8B"),T=n("li",null,"\u5220\u9664\u538B\u7F29\u5305",-1);function M(O,E){const a=u("ExternalLinkIcon");return o(),e("div",null,[r,k,c(" more "),m,n("ol",null,[n("li",null,[d,g,_,n("a",h,[y,t(a)])]),b]),f,n("ol",q,[n("li",null,[x,n("ol",null,[n("li",null,[w,n("a",z,[S,t(a)]),j,n("a",v,[I,t(a)])]),T])])])])}const G=p(i,[["render",M],["__file","alioss_unzip.html.vue"]]);export{G as default};
